<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="plotly.min.js"></script>
  </head>
  <body>
    <div id="plot" style="width:100%;height:100%;"></div>
    <script>
      // Mapbox token
      Plotly.setPlotConfig({mapboxAccessToken: 'YOUR_MAPBOX_TOKEN_HERE'});

      var trace = {
        type: 'scattermapbox',
        lat: [],
        lon: [],
        mode: 'markers',
        marker: {size: 10, color: [], colorscale: 'Viridis', showscale: true},
        text: []
      };

      var data = [trace];

      var layout = {
        mapbox: {
          style: 'streets',  // street map
          zoom: 12,
          center: {lat: 0, lon: 0}  // initial center
        },
        margin: { t:0, b:0, l:0, r:0 }
      };

      Plotly.newPlot('plot', data, layout);

      // function for live updates
      window.updatePlot = function(lats, lons, colors, texts) {
        Plotly.update('plot', {lat:[lats], lon:[lons], 'marker.color':[colors], text:[texts]});

        if(lats.length > 0 && lons.length > 0) {
          // recenter on latest point
          Plotly.relayout('plot', {
            'mapbox.center.lat': lats[lats.length - 1],
            'mapbox.center.lon': lons[lons.length - 1]
          });
        }
      }
    </script>
  </body>
</html>
